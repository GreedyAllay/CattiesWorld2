<head>
    <title>Cattie's World 2 Beta</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Archivo:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>

<style>
    html, body {
        background-color: rgb(27, 12, 12);
        margin: 0;
        display: flex;
        justify-content: center;
        width: 100%;
        font-family: Archivo;
        color: rgb(226, 226, 226);
        user-select: none;
    }
    ::-webkit-scrollbar {
        display: none;
    }
    #pane {
        background-color: rgb(109, 48, 48);
        width: 500px;
        height: fit-content;
        margin-top: auto;
        margin-bottom: auto;
        display: flex;
        flex-direction:column;
        border-radius: 5px;
    }
    #title {
        font-family: Archivo Black;
        margin-left: auto;
        margin-right: auto;
        margin-top: 10px;
        font-size: 25px;
    }
    button {
        background-color: rgb(160, 71, 71);
        border-style: none;
        border-radius: 5px;
        color:white;
        border-top-right-radius: 0px;
        border-top-left-radius: 0px;
    }
    #play {
        margin-top: auto;
        padding: 20px;
        font-size: 25px;
    }
    button:hover, #version:hover {
        cursor: pointer;
        background-color: rgb(172, 95, 95);
        transition: .2s;
    }
    button:active, #version:active {
        background-color: rgb(105, 39, 39);
        color: rgb(167, 167, 167);
        transition: .05s;
    }
    #version {
        margin: 30px;
        margin-left: auto;
        margin-right: auto;
        margin-top: calc(auto);
        width: 100px;
        background-color: gray;
        padding: 20px;
        background-color: rgb(160, 71, 71);
        border-radius: 5px;
    }
    #version:hover {
        cursor: pointer;
    }
    .dropdown {
        position: absolute;
        background-color: #363636;
        width: 200px;
        max-height: 50%;
        overflow-y: scroll;
        border-width: 1px;
        border-style: solid;
        border-color: rgba(255, 255, 255, 0.147);
    }
    .dropdownItem {
        padding: 5px;
        font-size: 20px;
    }
    .dropdownItem:hover {
        filter: brightness(1.2);
        cursor: pointer;
    }
    .dropdownItem:active {
        filter: brightness(.8);
    }
    #description {
        margin-left: auto;
        margin-right: auto;
        margin-bottom: 20px;
        padding-left: 20px;
        padding-right: 20px;
        text-align: center;
    }
    .dropdowntext {
        margin: 5px;
        margin-top: 5px;
    }
    #darkoverlay {
        background-color: rgba(0, 0, 0, 0.356);
        position: absolute;
        width: 100%;
        height: 100%;
        backdrop-filter: blur(2px);
    }
    #changelog {
        font-family: Archivo Black;
        margin-left: auto;
        margin-right: auto;
        margin-top: -20px;
    }
</style>

<body>
<div id="darkoverlay" hidden>

</div>
    <div id="pane">
        <span id="title">
            Select Version
        </span>
        <div id="version">select version</div>
        <span id="changelog">CHANGELOG</span>
        <span id="description"></span>
        <button id="play">Play</button>
    </div>

    <script>
        const versions = ['2.182', '2.181', '2.180', '2.179', '2.178', '2.177', '2.176', '2.175']
        let selected = versions[0]
        
        const descriptions = {
            '2.175': 'Initial private alpha release',
            '2.176': `I added saws to the editor, and the ability to toggle wether blocks should float or not,
            also fixed the bug where objects would freeze in the editor when changed or selected.`,
            '2.177': `Added blenders, and fixed the main menu loading bug!`,
            '2.178': `Added finish line, fixed the vehicle leveldata bug, made your character walk by default
            when no vehicle is present, fixed the zoom amount not saving properly and fixed the saw lag by removing a visual feature`,
            '2.179': `Level browser now loads 5 times faster due to asynchronous loading as opposed to waiting for every thumbnail to load and 
            then loading the next one. Breaking a leg doesn't allow you to fly high in the sky anymore. I'm sorry if I just ruined your dream. Also improved the looks of the dialog to look more similar to CW1. Nostalgia baby!`,
            '2.180': `Added custom textures! (yes this took that long). I also did more patches and small changes but I honestly forgot about that.`,
            '2.181': `Added fans! These are work-in-progress, which means THEY ARE NOT FINISHED YET!! Also did some texture changes here and there and fixed the mobile controls
            not changing when ejecting and stuff bug. Also fixed a small editor bug involving the selection dropdown. (there's still a lot left lol)`,
            '2.182': `Fans can now shred Cattie, Fans now have a pretty cool spinning animation, Cattie now gets fully paralyzed on death, fixed a bug where the jumping animation wouldn't be shown when not in zombies gamemode,
            fixed the game showing a white screen instead of a loading screen when loading audio, fixed a miniscule annoyance where a part of the stamina bar wouldn't get the\
            sprinting effect applied showing a blank yellow corner, added a command to change the game settings, and changed the back button to a green done button for clarity. 
            BUT I still want to get the fans working correctly, now, they pull you up and blow you away even when you're next to the fan, and I'm currently trying to implement
            some very complex math to fix this issue (massive thanks to derpygamer2142 for helping me with the math for this, still trying to implement it correctly (close!)). Also did more but I forgot about it sadly`
        }

        document.getElementById('version').textContent = versions[0]
        document.getElementById('description').textContent = descriptions[versions[0]]
        mouse = {}
        const overlay = document.getElementById('darkoverlay')
        const changelog = document.getElementById('changelog')
        
        function createDropdown() {
            const dropdown = document.createElement('div')
            const text = document.createElement('span')
            text.textContent = 'select version'
            text.className = 'dropdowntext'
            dropdown.className = 'dropdown'
            dropdown.style.top = window.innerHeight/2
            dropdown.appendChild(text)
            for(let i = 0; i < versions.length; i++) {
                const item = document.createElement('div')
                item.textContent = versions[i]
                item.className = 'dropdownItem'
                dropdown.appendChild(item)
                if(Math.floor(i/2) == i/2) {
                    item.style.backgroundColor = '#313131'
                } else {
                    item.style.backgroundColor = '#363636'
                }
                if(selected == versions[i]) {
                    item.style.backgroundColor = '#bf5656'
                }
                item.addEventListener('click', () => {
                    selected = item.textContent
                    document.getElementById('description').textContent = descriptions[item.textContent]
                    document.getElementById('version').textContent = item.textContent
                    changelog.hidden = false
                    overlay.hidden = true
                    dropdown.remove()
                    click()
                })
            }
            overlay.hidden = false
            document.body.appendChild(dropdown)
        }
        document.getElementById('version').addEventListener('click', () => {
            createDropdown()
            click()
        })
        document.getElementById('play').addEventListener('click', () => {
            if(selected) {
                window.location = `versions/CW${selected}.html`
            }
        })
        document.getElementById('play').addEventListener('pointerdown', () => {
            if(selected) {
                click(1)
            }
        })
        addEventListener('mousemove', (e) => {
            mouse.x = e.clientX
            mouse.y = e.clientY
        })

        addEventListener('keydown', (e) => {
            if(e.keyCode == '13') {
                if(selected) {
                window.location = `versions/CW${selected}.html`
                }
            }
        })

        function click(type) {
            const audio =  new Audio()
            if(type == 1) {
                audio.src = `resources/coolclick.wav`
            } else {
                audio.src = `resources/click.wav`
            }
            
            audio.play()
        }
    </script>
</body>